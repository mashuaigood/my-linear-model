function [Y,Xf,Af] = myNeuralNetworkFunction(X,Xi,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jun-2019 19:16:37.
%
% [Y,Xf,Af] = myNeuralNetworkFunction(X,Xi,~) takes these arguments:
%
%   X = 2xTS cell, 2 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
%   Each X{2,ts} = 10xQ matrix, input #2 at timestep ts.
%
%   Xi = 2x5 cell 2, initial 5 input delay states.
%   Each Xi{1,ts} = 15xQ matrix, initial states for input #1.
%   Each Xi{2,ts} = 10xQ matrix, initial states for input #2.
%
%   Ai = 2x0 cell 2, initial 5 layer delay states.
%   Each Ai{1,ts} = 15xQ matrix, initial states for layer #1.
%   Each Ai{2,ts} = 10xQ matrix, initial states for layer #2.
%
% and returns:
%   Y = 1xTS cell of 2 outputs over TS timesteps.
%   Each Y{1,ts} = 10xQ matrix, output #1 at timestep ts.
%
%   Xf = 2x5 cell 2, final 5 input delay states.
%   Each Xf{1,ts} = 15xQ matrix, final states for input #1.
%   Each Xf{2,ts} = 10xQ matrix, final states for input #2.
%
%   Af = 2x0 cell 2, final 0 layer delay states.
%   Each Af{1ts} = 15xQ matrix, final states for layer #1.
%   Each Af{2ts} = 10xQ matrix, final states for layer #2.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 5 6 7 8 9 10 11];
x1_step2.xoffset = [0.799104543495468;0.815989829246233;0.881530150433826;0.829780915700903;0.634157661511238;0.635923009604595;0.931095298289859;0.902503249526394;0.837061608368782;0.81510438914623;0.581733566026751];
x1_step2.gain = [10.1321685494574;11.0884411607336;17.0661117034594;11.7961702659616;5.56061772058455;5.59135171256533;29.2918728862098;20.8180818807634;12.5396437109871;11.1088378496733;4.91142857142865];
x1_step2.ymin = -1;

% Input 2
x2_step1.xoffset = [-0.222423275527645;-0.222944634519863;-0.0672185155814461;-0.0580652846496811;-0.20823263216003;-0.0874316681302214;-0.0432645293911705;-0.0645906838443732;-0.020118841714823;-0.0232642175593033];
x2_step1.gain = [2.29992670605565;4.24189580751715;14.0962617700931;16.890627686999;8.6226590827848;13.4563254258826;16.6259073960294;13.0441167106891;23.9451315035237;22.8311082154255];
x2_step1.ymin = -1;

% Layer 1
b1 = [-1.310339876579708962;0.55931600843297546444;0.89898728116017823098;-0.13619585805302350523;0.2738672230006283792;0.09788475638491636599;-0.11499811341718697844;-0.055505858268924936072;0.064700958387737747546;-0.063349165380781669032;-0.33035016397963079537;-0.21440074652935731114;-0.15819012803292206715;0.61088284829069183779;0.68262506474080197894];
IW1_1 = [0.15140799504593521752 -0.14601645585660144588 -0.18064039467097511849 0.11237929829895834666 -0.12914837765095152355 0.0032061066089476134879 0.057427845215465123108 -0.093302622899576692639 0.22180667956981156563 0.0055259241890825627416 0.0088759047069253450835 0.056765593985067148985 -0.053251961970266062374 -0.020502299501538846782 -0.21949338189892594886 -0.012026116317097705621 -0.050987784454736916062 -0.079742891240112342977 0.03681973062720433898 -0.12510461392246927104 0.040859765964181997411 -0.021747202790085875396 -0.095345878062671168829 0.14608466544745465909 0.10086831620281411226 0.17636904024427604853 0.11186808885236018685 -0.20109716596555662904 -0.2603196880839542815 0.015312981124611968128 0.18316739987375188492 0.019266223821588920884 0.065598631220138703402 0.095148634133706055938 0.17580084513300167637 0.14327439634228333887 0.20377600327190148466 -0.20613003221688949718 0.10652128740203434254 0.044592989014868862629 -0.21010699925282622091 -0.081824289694084145763 0.13651572690512700503 0.030711033089363178744 -0.17196037473576758492 0.18728899850167080032 -0.077984864808965714822 -0.14939960158742368601 0.045248003771955321028 0.016319895722148609202 0.12707394033959684698 -0.13495458975688559566 -0.061468913552290498081 -0.12302444244201463097 -0.033590600140870258139;-0.094573165576906217944 -0.14122563864694084868 -0.15360921220141798837 0.044068437908990169827 0.17893289719522276204 -0.20901364344485937052 0.09054965317325276708 0.15285261650820994306 -0.019853409640234506717 -0.023727363566159544173 -0.041437731697128443731 -0.13128943305699350419 0.31187692510738218576 0.12627622858671569417 -0.035638362763844501357 0.074532289593941716821 0.011158026011760073526 -0.12413961480454416275 0.0050922518249855450514 -0.016311260070322550902 -0.11326365890197954978 -0.013062311770253853815 0.12643110758679110273 -0.10383818907934841413 0.047481871510035800199 0.044381700685337831247 -0.11942188395830245773 -0.023014405577350384446 -0.032299685362262679778 -0.10321897818613069708 0.029452297705017220497 0.041225533157496351 0.1370792678592700764 0.16415962148433965728 -0.00070621269168762569428 0.11383019598061605571 -0.02214610012323493457 0.15673884466354404132 0.080750436523716204174 -0.008524975873536172824 -0.055136596698482032153 -0.13686846827990220565 0.076935434769866931082 0.039400472929413565826 -0.18037534570001664824 0.035422326247582514025 -0.18844060078906071931 0.0030543138996518377423 -0.16382143479902108729 0.0684690390790225617 -0.080353817148645007018 0.093912897005974757536 0.083382684384638749986 -0.039970040290772487768 -0.046422352277625422712;-0.18036991874743951714 0.079783599663286186576 0.0051710538695164945042 0.072680680510015971407 -0.19177431196774186173 0.10737032199488699691 -0.077723550890085507659 -0.12955074646301634189 0.057513569607270970119 0.034446569999126999684 -0.077900106764397791803 -0.014061746423632221284 0.05321040861918950593 -0.15210509112002137955 0.13665264240107299898 0.063456150772602651355 0.12499227028941475859 -5.9414113922746057683e-05 0.033188084681466084591 0.062319892779264716987 -0.08248719716372732158 -0.036737293393502748473 0.17352835017445769616 -0.060046910900454171511 0.12866235094091704738 0.00091019063880320549408 -0.11003864782874733796 -0.11961673900112620994 -0.0040483095456080664745 -0.037675928762460945964 -0.26661339204629674882 0.091044436940252812529 0.0515099138067270923 0.03320050429145658677 -0.090492728784466514025 -0.020514851318517504652 -0.05567540842021708597 -0.060769431216776387261 -0.077637011321647200757 0.083307087345747404816 -0.22385470597537437953 0.1276753431310697906 0.15824763356607343678 0.21193848902670228695 0.020996910579920990275 0.058551654583094393802 -0.11796716340973860404 -0.074300519813339321873 0.22172941388454872613 -0.040023218814295991042 0.022377888442467224611 0.17109277769387090662 -0.037275348309393455115 -0.16579853186660950537 0.027855999653503285551;-0.030259841277509115509 -0.16264880877398163461 0.18996098180107021114 -0.25526989439659936165 0.18698242203740986223 0.046236684722145336701 0.02412987591584053737 0.14549196960731811124 -0.15771806056081547065 -0.14844785048150119233 0.073142875297698570214 -0.026370266186463743596 -0.1007113800115206903 -0.11834704738241068334 0.010703712984927282736 0.12399721065088836758 -0.045446497222198609101 0.0045508660594084692289 -0.12148643658558483382 0.31251801791071881498 -0.06156869509877876262 -0.19893751078780586017 -0.052221330561064281672 0.12054428354273717672 0.064841929021102612252 0.16110784274482295442 -0.081682689198262159458 0.02160516993587049267 -0.0065991984611888550305 -0.028326521599062157858 -0.11236625737126798574 0.094573424076787815373 -0.031244710241831823855 0.083334309383547022776 0.068706581080135734063 -0.059587319237947231065 -0.0067903940823507979996 -0.11439711247911960035 -0.19246749162184648152 0.050650560759549587142 0.015241058804364642637 -0.013721916605444266571 0.15931788825720119562 0.09601095379457569301 -0.12780007403971047064 0.085954018086711977964 -0.1346483229420057659 0.1097164887150736956 0.034954770214359970337 0.13711708576745651467 -0.041617158175311058654 -0.066860965207795414189 -0.020661768531637293711 0.02073162431366645797 0.053557408312824746066;-0.11754799555477057904 -0.21099121773913570577 0.34610449582047025929 -0.15665868180278316735 0.056938725581973499701 -0.08859108273895655028 -0.17126131553765083781 0.082386294638798984735 0.013667507734395243149 -0.11889896974817494579 0.096073318549575265068 0.0032720331483776579629 0.0014885532834444576734 -0.16313848274881151412 -0.11119983905818948966 0.24594806372493419055 -0.02449992200486192373 0.11281940551908205272 0.14446579637691908671 0.068532228611883405645 -0.033679791720022667079 -0.11247134470302296017 0.1620724461861658694 0.17510719197547611192 -0.10265428612862179114 0.15307464558345762473 0.12546451557586066339 0.034496823114443297964 -0.0890644880358158475 0.024803868843047263693 -0.13558772357612045023 0.066479328192905820516 -0.21064712245675162872 -0.14634672300769055453 0.14509305117719711875 0.077566807255062875104 0.18257376541537087555 -0.089184526349185513916 0.12129453724768880785 -0.031695905299080090467 0.0074466980165861142854 -0.068428483508454721052 -0.005366567419255062997 0.072235145105516304631 -0.021385122648389067596 -0.099400785806586081095 -0.093923668350098216129 -0.14830428440519533018 0.082650154890310661981 -0.11486132344524416227 -0.077990182428966117745 -0.072002065450358684884 -0.047758660396476915189 0.12752703782193594573 0.043275184062687134523;0.10137961380099093367 0.18991205399847418955 -0.1127397579406150957 0.10989331018189749112 -0.14061856523319074541 0.022112199364033097854 -0.11506079425691466411 -0.11189142332779253297 0.093933722934430738394 -0.065836899342245402966 -0.0083050393545259382916 -0.025984174453589168469 -0.025102468345956443357 0.060791706278273814623 -0.013839010657384690633 -0.089756212443010213731 -0.12560124440927780687 0.16108474244571757694 0.087672994981223204003 0.1110858005113390945 0.075918983205303644524 0.08896683242112757295 -0.013282995215012322748 -0.060893072292782020327 0.074460954087646094579 0.030323665640358966888 -0.18184283636324680145 0.015310264014633014062 -0.017282670249316588185 -0.052910379316313815856 0.19649488917500620988 -0.047761293429551335277 -0.054419701831882182075 0.073547780528242123754 -0.019896486562307160589 -0.0031355514750433066511 0.098346062510869317053 0.06505039410056247251 0.086033283432478124819 -0.057904096623938826338 0.018313744854764803932 -0.21937597669043973347 -0.18967772140115946033 0.10624733213248019337 -0.041050901272014758692 -0.034573479789081984492 -0.073941072046858555278 -0.16834082632411812019 0.079345294205114019759 0.058963714003722154933 0.053338523654637370885 -0.0016634520581882742372 -0.095334693794406122347 0.13506034607451500307 -0.029085542618194629855;-0.074492937475670303882 -0.22665111420944439313 0.15025159608875868211 -0.03983353843766261615 -0.0095144893865487991519 0.032500544216812941867 -0.14215431071138642793 0.21430300854885697692 0.17314563351978917716 0.016733684061322851716 -0.051560385355624419046 0.00022662754307292178046 0.10051106687501575043 -0.016624094165923131855 0.12301681881715387235 -0.13231411458110470258 -0.0037568686130047793288 0.0043085064260120365526 -0.09567563952326629817 -0.20340900865789454666 0.036216317971447073432 0.20122070580678599883 0.066334988455122187445 -0.01948448190144693587 0.001531110740483833995 -0.11107644737066468821 0.20087264171048740957 0.053599099210340936383 0.045559526343910992929 0.0019857297249954945079 -0.056052713307835115575 0.042906325174692637459 -0.12152996386214755253 -0.0072012167122910515291 0.077780675906604895831 -0.093821348209892907466 -0.02336917188272239973 -0.038020152441271805321 0.014189681800369799078 -0.028859154936386778589 -0.1186566663194166954 0.048674963262361238547 -0.0072526504828189604021 0.080818635256428808522 0.15442131185929391934 0.0091041231421908376531 0.096233313498212555426 -0.042648121744099008745 0.058533004986989753404 -0.10849053179881741615 -0.013112849077575624082 0.026564666563177380398 -0.1053187745877325332 -0.077094965900814022008 -0.11503270832107208299;-0.08847173671698536912 0.21883279829394944316 -0.14416004941111479343 0.13188510583748488947 -0.12229874621288733261 -0.1182060513611635777 -0.0019350792715506315127 0.11028175078330991477 -0.058454011754358818631 0.049658959391464349564 0.040844273818040503776 -0.026299108189726774082 0.046972606252739294852 -0.021855915011508204177 -0.060469802326962342198 -0.092143918913824424122 0.31645397513856682314 0.020947573685841942848 -0.018015258006812747554 0.023378568517513659275 0.039676413269203909817 -0.13354254530463127715 0.061989536458721586354 -0.094967633499197137703 -0.0005918831404151564694 0.072829331143494560608 0.040075464378317465775 0.010252420869859264416 -0.099943233727514818598 0.035357775321907619626 -0.043452524418182411625 -0.13294484626611011158 0.074295552613652587892 0.13647507753688689625 -0.066018460755120869643 0.23859205903559826956 0.029616539812848060448 -0.017432680823157770122 -0.072529374268376620161 -0.0023866655290422505997 -0.028678769902868862796 -0.072143345945729783764 -0.10253608124277743818 0.20947413413706938989 -0.022595531387437906706 0.021051888619985414941 -0.10978673350106797624 -0.10807552621486403444 -0.00027666873257004161689 -0.14961914279197666144 0.0064066290508382923996 -0.1279516803225734245 0.18878340377872676603 0.065945137157647243376 -0.093299571067562703242;0.056484215813489592473 -0.15437821232299464569 0.32508299074821456198 0.16649834676187286187 -0.022789780393600331948 -0.39773074973511995944 -0.088959905558957663718 -0.18702997609159538461 0.1075599086990294273 0.073962071211887830957 0.056489212133138705374 0.023352042231320244148 0.0016316280238793999611 -0.10739819459139149371 -0.1503559442300512472 -0.0011811216594617202948 0.15078663411840068087 0.098332846772632070964 0.075162935333236757796 -0.087916492232279430663 -0.024527170399314939669 0.004744040768641576318 0.095320425632943073246 0.076580892093120356279 0.1360473385444938843 -0.13678252748081776158 0.047838236846753784404 0.12398952957523959317 -0.02913179343277092978 0.069066863251225421583 -0.028034601933690412451 0.13032237859145501258 -0.2464141385802473827 -0.14087852296189959378 -0.0018641021527715485265 -0.13526536709404499148 -0.06430526287520169082 0.21668724046460582922 0.052994400584165463064 0.015195509845717646361 -0.046271973600947327587 0.015032790074875641145 -0.010502040962872443916 0.0012720939251586226362 -0.035614415868652229968 -0.0062682092646925494095 -0.089348335570693576679 0.074031705186926019535 0.029469186856168647776 0.034192419833070725188 -0.10492593517907275458 0.18203267439469916766 -0.14818989951249514347 -0.1136546221868465073 0.092780320811454652929;-0.021072279700078515308 -0.10406467758850851402 0.021968736624587471146 0.0023326804750915491708 0.080914411224670759748 0.074295367744476745187 0.08420338512921739238 -0.053862312010483082148 0.025759782115606963404 0.11018262974990392089 -0.18690004163407733517 0.1222630411560223368 0.06024362665676695483 0.0035478035986442751915 -0.03007769845709809195 -0.10987466169929716031 -0.071007412473261796726 -0.061039533255039912785 0.02845511785445156358 -0.049458596470663016009 -0.072581016699593631225 0.13771816832635100369 -0.11770700159591448997 0.12574517856588199316 0.10217481322972868374 0.050676069226639343379 0.071763542746934610994 -0.19922902655440807851 -0.01007335656189742995 0.015800018266351526647 -0.085054451259173102784 -0.046078862159039279955 0.11381845067041962416 -0.11054899693431533003 -0.080078737068833727442 0.0036552058684208642118 -0.11201758612979749452 -0.075436057650504359517 0.14625849121080991555 -0.019760234947676202921 -0.016422228802783021134 0.1801754112544465547 0.047338482263871398126 0.069679845367283707591 0.10831943468169034916 0.0046732873242375629411 -0.12088908270001867684 0.081872712014250087487 0.085584616574436028769 0.02822822908366120695 -0.020714743962652128889 0.04461234035090951705 -0.11669618764065026184 -0.026348890291698352784 -0.12954489823507747692;-0.084993270297201439778 0.13006293391255388525 0.023226486620718727466 0.0096393675168936401171 -0.096381681545217257057 -0.08351908569896979162 0.17878905285881654952 0.057675324680528043675 0.0060692126470411108391 -0.098249668214171345659 0.2613249602757956036 -0.089297557952484438171 0.034464071210585908722 -0.11558029842234132656 -0.01777233354886749786 0.079205937828503700238 0.10142607122580868384 0.018594398662070403538 -0.14335055545629801776 0.10161408307053952649 0.10992037559683670578 -0.12177083594942550437 0.16108888841079471721 -0.1499144492343137125 0.14969348460656933808 -0.14422550899274586 -0.15059549949949119219 -0.038368307284444333471 0.044233656466805243435 -0.018801943536307274413 0.10210472897814319715 -0.055093058754687174172 0.024401390351221654423 0.15406298955491057323 0.020170141551315929479 -0.17769985143391711646 0.11487655814457446712 -0.10182575753948558406 0.13190077476189060457 -0.12981375994371094351 0.025892222124347014783 0.008832957577394542556 -0.062420079519063198514 -0.092477079208849150005 -0.090650684156134545 0.047689047372413320702 0.07078069309515466756 0.098792730932398625798 -0.017929765006875826583 -0.037993159198874554283 0.00076193251825161772278 0.07651530669830518272 -0.065300010899324342772 0.026916262936449796006 -0.096825470823861975456;0.047077450486602050173 -0.079585442546464629787 -0.095331380542861873795 -0.0053937337879798536236 -0.034991385930764590251 -0.031690822656978263894 0.043052880175072465174 -0.21798630593256004828 0.21399062374467900383 0.014743613385660615453 0.065964055664913756605 -0.013019143536521697244 0.020626302095757258898 -0.14031183465037605496 0.018201825929348852684 -0.052383342220141439205 0.081302555817824015416 0.063725299126162773811 0.063732721394401670167 0.081686748851009294281 -0.20733788797369032131 0.011602959314195087845 -0.11868738650710156102 0.17942827512504405663 0.10006603026778278231 0.030854245237095428989 -0.17738075830940186473 -0.064204714466940357442 -0.051060212084577567826 0.062452086290471990615 -0.12955055254888084293 0.074870434493723006519 0.14033989337832497579 0.037696692500634440548 -0.02584460260205459492 0.03089747241654277124 -0.088040889755103005077 0.13907382569358481272 -0.091218121702221738323 -0.023271948201572346254 -0.027663120327772693779 0.0471230458207006625 0.088886113861511267809 0.06884697412002210859 -0.0014569689685792488153 0.01997436934120648197 0.0017320697970520670689 0.12568226061853302045 0.006530503704347650519 0.1156379800129782448 -0.0039939375887064806209 0.044427931131238489193 -0.13230354519757037135 0.010626629689134066067 -0.24789379758669158327;-0.20729943604802050783 0.013326297795954645045 -0.012553640552872466149 0.11912780082605502197 0.17789530038394690825 -0.12150979578606330156 0.020761986974037211634 -0.24601216370378953258 0.2126234864375484146 0.051166942582437618947 -0.091895058362691850462 0.028101880528548683208 0.079508042823311711467 -0.20620588811362347559 -0.052241392724105058243 -0.073672060172073644546 -0.036746554247052649889 -0.039240149854100493665 0.07280411556953136909 -0.0031592289049300497673 -0.041258933473676651094 0.11494168428831234852 0.18615398834930460548 -0.017326734389849832857 0.054917566531485238757 -0.044581236356191378256 0.0028004714353697581636 0.062992514041315658679 0.055865249234423194902 0.062116896301526842994 -0.090713731933887403747 -0.073366263428040853767 -0.075809682254925195299 -0.14021580195457891693 -0.083484933404064098905 0.11195797645840213641 -0.1212293476861710656 0.067748864309335521394 -0.061188917984757555668 0.048894611123964815125 -0.0099930654744716136684 -0.13912815138347633948 0.058017345626592276009 0.16774381221696274546 0.025916927923436309383 -0.051726849410445294164 0.055155722715577920612 0.063804609488540664497 0.0026611607936547761015 0.15932836427743479746 -0.062336963677521055327 0.14947235501080419207 0.0038171483457546326323 0.052064868853556219019 -0.17296197787636705123;-0.018773683699120413682 0.064055165594513255312 -0.019955864774540164885 0.0066555348767730997117 -0.072733118167803839649 -0.16919870515624110818 0.021959964814438875935 -0.003287371565464389158 0.17097572274607528153 0.13869868353020683993 -0.22410019360142727218 -0.095702218267280841912 0.1579944785641602123 -0.22555325989012076082 0.095384075554985806034 0.089935732006670945915 -0.055284739173609320773 -0.17623855295940044074 -0.0058981525343944395459 0.025548942896326608254 -0.29099774689440860431 0.041445531536621053881 -0.1640495169944452547 -0.08154449091013085682 0.0077523918491256777266 -0.056041391375732906022 0.22179492019311955464 0.11500248303911109193 -0.084292975145186355146 -0.20720837237142430975 -0.047354313850408689957 0.18455493953025894904 -0.064450548089640596894 0.012373872593441262446 -0.0065432809919145785288 0.11856528831375917621 -0.023850737566524397165 -0.080018664184520416072 -0.098811589722176046413 0.18383757075382137214 0.15804426919233582893 -0.08241478227958339009 0.17852199680603905718 0.077616102783401932919 -0.024319260690407695086 -0.12418657965571465451 -0.010958614941805127144 0.035223888097874474223 0.15380880377879291299 0.10744266964494127159 0.14603749375097729857 0.16006381424249357948 -0.064131067794672133586 -0.098147967236217853459 0.054025066249814832076;0.091869326306006776628 -0.10968195397206990938 0.10805133366689563534 -0.0073088704740376332289 -0.010807298675800335735 -0.20148292802455197714 0.26890126418210058556 -0.21504676823316101753 -0.11988600048738508319 -0.021758453789893061198 0.035331761455122692728 -0.0034839610844960055072 0.061864071450467225666 -0.071480694457113039264 0.047018797473043577595 0.16326069414346677799 0.042533884823234079098 -0.070534057939697844541 0.17509501345250172433 -0.036954938778149593048 -0.063055780680432743646 -0.080501283536353870907 -0.17110967457739251207 0.043810282383813604901 0.03441862256303662021 0.044452634591366044226 0.03700160810652066562 0.1512704117049276098 -0.0030500338888155720946 -0.016711860791784220043 -0.152987240836243793 -0.030317271654490829391 -0.050008420132266404035 0.074267234345245472515 -0.10997864304127746848 -0.075319631172977130618 0.084505741529518341171 -0.17435596670484332371 -0.095770007636148221652 -0.074717195993908844254 -0.11400766076740689869 0.068650216735511679356 0.11355980689986829024 0.0062325661925001531183 -0.019351916285260704204 -0.0072027585906993532236 -0.013910944277399984667 -0.2113681728919843128 0.20145363648417816127 0.078588384388389095903 -0.10324904144524416072 0.11562663510253561039 0.086394950316429353077 0.10026130555771367581 0.1443456580689404245];
IW1_2 = [0.13695265484938098921 -0.01116343490931362599 -0.11817678577741252965 0.19872715486596009837 0.074343541168230803384 -0.085593168848760156631 -0.054715249191300469045 -0.18106983781854599225 0.14377120158838910258 -0.13989440521994833677 -0.25801262231074323372 -0.045120735961923327806 -0.011155802565685392011 -0.028163014573545867153 0.15763039925975461109 -0.023001783425870031552 0.050099943354082819569 0.11178695605523639167 -0.018939662981321082891 -0.007323047962159190058 -0.060545452769077509614 0.021499052249143689453 -0.067874861715263926087 0.044365231930964095508 0.032433202903523375427 -0.077257916384256136721 0.18500156984331889154 0.077271102340632696892 -0.058291566280446377446 -0.0042128752141757010857 0.032249864156627332246 0.081407658454378098445 0.029424434043216516482 0.040676816527259677947 0.11945712920993117878 -0.21275549785327152463 0.21564440413701449484 0.13993978838765272488 0.008102359820318533537 -0.065590178603850676775 -0.19393330337626749071 -0.14320994313150464672 0.06099004430719247305 -0.14630136873757912386 -0.31807344172522211689 0.19817768679784006358 -0.18542084261205415974 -0.071395060252356604136 -0.023906860081400520268 0.098656746519064336676;-0.078433111395876595195 -0.068918476891160540543 0.12816975450354425869 -0.22220259326097138719 -0.11689713495345122052 -0.16671096994915923784 0.23131293043884973426 0.16752702750764272843 0.14988261281952275361 0.23120024366126848414 -0.079160496206626726479 0.079260878236951104459 -0.10305412447207543125 -0.13952709834627377572 0.13395272843303462906 0.0469115083667936833 -0.032830492344743548994 -0.038682165537021202806 0.0072739277189526174022 0.069211384886164892261 0.017804533556766595492 0.036857211430433252375 -0.12565334086335205876 -0.1119577816014035998 0.02844037367733065827 0.02885066009890617858 0.078754878372302231093 -0.13265249069745155275 -0.025344854421446644938 -0.034943416472416909124 -0.16809280462367764963 -0.22749309421315269675 0.20478479901765955784 0.19060988327430478106 -0.1701587933436872202 0.12674370030349199623 -0.092004358170137495732 -0.032429024376847276345 0.047379383019478908678 -0.14233883979668360276 -0.055157483547964569759 0.16249975076001663132 -0.045565730340306184742 0.018219053556035244568 0.074009125089468649761 -0.072139937456108166325 -0.09011074534085765364 0.047879142989672995867 -0.061131946315038883377 -0.052601822226388102177;-0.12338139619693401505 -0.12647648432807553909 -0.018959573949988386965 -0.0026583046697922375207 0.07805619004367383984 0.06478991034247660874 0.05573239293939734329 0.35788351357051728652 -0.13227798427116568836 0.1357484542532451377 0.14246238469469785226 -0.083413078035779839037 0.084621407392193051522 0.13214084688223604047 -0.19191327684876616222 -0.089793999700929286178 -0.21184101516539477483 -0.088632341153321622662 -0.14850074140274915901 0.21963102998461875304 0.022896821808267811549 0.10796348746323662648 -0.086965559597230110422 -0.062879627683645883396 0.012667031473467905978 -0.12251582137056001021 0.047042421930108678507 -0.01216844499647832395 0.086002397616938841551 -0.10855016654231067208 0.2059355914706284818 -0.12467360727222345784 0.11123968303982734174 -0.13576652385497983699 0.01703230570127563237 0.045874606898176323311 0.093259185446172190859 -0.083320727277353387463 0.075079231954659139681 -0.24525848873382316562 0.063457717045784248211 -0.0063358613573882170342 -0.17566260437500480496 0.073817671031527920533 0.13772982382873721896 -0.073611577693199883865 0.044607317476915438192 0.000396545186245305303 -0.070171371484250608108 0.0076339615091901595265;-0.0059827088336491295387 -0.043573577835134699732 0.21754904733390689753 -0.029123272441862330107 0.10568146809098817596 0.067161538809011905871 -0.25483750458264764482 -0.26475785532856371818 -0.11527649541583925852 0.13300355429057972301 -0.039433679801456560099 0.031150773623070927842 0.17167902309655161397 0.091093416872366383963 -0.0018245967624858922939 0.083052213947656064463 -0.082221047601876068311 0.066698007110584808799 0.10276788235037792596 -0.065673090719056165243 -0.010615949398233298293 -0.072715684795551766006 -0.030045172181989928534 0.15308169435628821153 0.0034001601154054327675 -0.22325460589317885907 0.17013632798631950216 0.019254234086988585017 0.01852774513108817328 0.056423248925006372345 -0.030661027981598136527 -0.01378132845596030491 -0.062137784989767817778 -0.066934814420782515199 -0.1197740233420016287 0.15068183548238148206 -0.068087506115569268461 -0.033836270085580537337 -0.022457255379069139545 0.027468522379924250471 -0.14094229044233916315 0.0095105029914612851383 0.066202909901776171853 0.013155516998732037087 0.0067816590742895820759 0.089889126208941419471 -0.078710516526468723986 0.047488374784909331838 -0.0088770810706335530338 0.063075717926175708938;-0.11123255362847726813 -0.050950289817771964029 -0.19848424206377068835 0.28240558070604576679 -0.068871020554279543946 0.10601037303219813801 -0.0051191659453142957653 0.014463030996821330323 -0.19573230203389921367 0.052491240483746953727 0.01049012258738063301 0.20759333339418933884 0.11204861910120939017 -0.015348406001852497524 0.015034786949442468726 0.18737146022523484823 -0.036502418330386796064 -0.11548854191856361417 0.14833803587918292788 -0.042981232170559657835 -0.054513685449381482639 -0.042203199966539511889 -0.12297871222169666494 -0.078072993208749316696 0.045043765654925065067 0.070898718062974833143 0.10574802925133741649 -0.0077677582988188416738 0.0009790047039079283718 -0.038707109595162450533 0.0017103048416967610648 -0.085745867444652193456 0.052426466454176319509 0.22508950470254832088 -0.041457941057922345629 -0.10147761551016913628 -0.10025059891448666327 -0.033927513886186699832 -0.077383574068012467295 0.0061198505559882741128 -0.16752684902609088491 -0.033295082111576737582 0.061148447706159056447 -0.024575987835452582642 0.0094652965127558184866 0.073008444187196541719 -0.15849591207954738525 -0.0032329749825828961278 0.064531255781576174479 -0.035681037506802362747;0.10794850967345898107 0.092762798783392594326 -0.28998297464363720355 -0.095111541788845718748 -0.090203237293562901766 0.092610053485429333353 -0.18947910031693793176 0.098826051794710531584 0.33543966370016464751 0.28802267216037852338 0.10308794524420794581 -0.16224693246269389357 -0.050438261747754849218 -0.18722470933980076002 0.15768904030028776941 -0.12034822801700809092 0.074381164784677405999 -0.12745658604152046434 -0.1016368634422962075 -0.0054276007020088497951 0.11225976464566690682 0.12920428793109381416 0.15332531200648677472 0.057926888781414991036 -0.097491824546386732231 0.01674666625457028879 -0.11733552352500530025 -0.066418848129455074214 0.011404402774097738282 0.015259376342389885384 -0.17015455155248021546 -0.010496869887620632195 -0.014714534678663480916 -0.12781863420726471969 0.087433356988171298529 0.021494298348191481079 -0.013480715366542642478 0.11555511072270543971 0.0067674651229092490368 -0.13771575325854767957 0.099628062129062514019 -0.04792052028743853942 -0.13142319550586656351 0.11034816077847139915 -0.019083363062022833806 -0.061776581633143867744 0.12606439526379459304 -0.030368851558035449972 -0.04154501558805943906 0.025109554371008774992;0.047500197631881672933 0.05753534994732829172 -0.051525304866685828209 0.15472612858929965518 0.15844460187463194067 0.012991415340539207157 0.047661754438864202543 0.20411952271347735821 0.033477926946986230616 0.048398986484357683913 -0.10395249171914831832 -0.15585292416755186506 0.015851134396973054486 -0.039680060110944964658 0.14614745438498547014 -0.13252494286813537583 0.06688094269060181063 0.040397712696510212904 -0.067640792307576844133 -0.037336833261335133916 -0.01466247468609321522 0.00020162784201682856181 -0.073198969567758689903 -0.13423010219309480795 -0.15449239612990953163 0.051100138355770687026 0.058603804037322231035 -0.023957321818663099289 -0.0057964668186750350001 0.024770031808263776735 0.028426096201510715755 -0.059445151142120858379 -0.0028200854641646498112 0.085949844148539220057 0.13637233726618111507 -0.058944975873702946945 0.065853524487308925939 -0.025849566560306493079 0.0035108187195874401669 -0.072586005309950019093 0.15601997611629939144 -0.078751665954900046396 -0.10249458170488048858 -0.12473931438057106469 0.052810862755346694997 -0.030478465654255396111 -0.036790665416314878577 -0.011875258287858531797 0.054181345002666567168 -0.068633792131301829542;0.016819760593566317197 0.028578156605310784527 -0.046055803416816872009 -0.18964943031574379995 0.095818044723878212365 0.060077035617864052441 -0.028161215402273721137 -0.017483002528322699048 0.048026433953800164167 -0.083261546579897732778 -0.013470501724560792617 0.01385805090916090998 -0.028661696225940187094 -0.083764707087810946762 0.11357167385150010452 0.010085448055032718295 -0.075956810566015428576 -0.08091557119045844626 -0.010869414727574685381 0.1399173264446015863 -0.037031084294821291214 -0.0054904159557193944752 -0.13425013686010245362 -0.11838178780482797037 0.15472740372901222505 -0.044968672215202190601 0.046830735967927854257 -0.07085731583053010707 -0.050440183752232393977 -0.083996209529805590521 -0.07180858928532460328 -0.087068088968658585713 0.17493216793950594479 0.077561461645736573534 -0.13857189369375003118 -0.011149133423106487653 0.043199609865000494768 0.019967836816944316974 -0.0072377937797428971642 -0.095411518327549724172 -0.0098048927736124041193 0.0048365928818903313954 0.0016136421154221819961 0.023736339131515463846 -0.012914951437023484276 -0.018377719119799611897 0.030871973923425222175 0.012007359694664737626 0.0067742789810592909938 -0.053040574765588106854;0.14440734515704889418 0.19076207726845142987 -0.067523040788314919736 -0.28380916573236913969 -0.020115268719061420166 0.12890810821884324255 0.046603725360618158957 0.13005502477015623564 -0.14425153936204462846 0.092467386425239120329 0.23566454787720927944 0.068989427778670980862 0.0042144592578248311898 0.0026771234772174365771 0.13755865893297905544 -0.072935121666622734771 0.16001666822351126585 0.066210819162259765269 0.034435240981009945793 -0.088062782392041988322 -0.029268190128826237356 0.10486016016031701747 0.055012039870836575151 0.08701465579358912128 -0.099138389581405542139 -0.099507625486816048133 0.14120805795133090088 0.012010599470589591875 -0.090220063860833268898 0.12673564722939306693 -0.1399457952808041139 -0.17884403586735314606 -0.22174282094728572923 -0.062810896577000979724 0.052593183936089173136 0.082995867807301559882 -0.084437481137242240137 -0.065787212654790608313 0.092967963193408567624 -0.074850388624323235809 0.061476200715010545506 0.072544328961328771732 0.024055984478625662415 -0.068632778308058348116 0.054907432270175561551 0.031158377274755434672 -0.1729678797203757501 -0.035901368598174596136 0.0303394565771025089 0.0012471592970446099009;-0.12851986318234864815 0.17337767045141666555 -0.039481220778526004977 -0.23709598400070824864 0.037082257709138262414 -0.054498092909673917505 -0.28330016560130738545 0.18299521762848325324 -0.071035745612067990873 0.020621235236596049956 0.046875041045935213202 0.012103169685560770039 -0.080129399121587063792 -0.038843996690221635482 0.004769492240562404374 0.012964279416717639989 0.11471834541798214824 0.086686835469851272751 -0.0021073201688186398231 -0.066510063021258739036 -0.04151263445328354923 0.043889204876769956354 -0.010349320969100432241 0.025744880258232769737 -0.062315162637535066736 -0.071742781878624400926 -0.035567599318450694723 0.041154610078756204139 -0.033122346315027736963 0.009936752644311677013 -0.0091466370598633807421 0.065658517618783412972 0.075759807741535387104 -0.013151996389397293055 0.067131280384833319497 0.056704526991539550007 -0.019956263645064534901 -0.0095948125341861253274 0.052113630467599425522 -0.027524198260650275388 -0.039446348624880403499 -0.083630210507495958416 -0.070763144651117895756 -0.0029813791393526675733 -0.014481654882562686182 0.028316769937060583956 -0.032921150513718883124 -0.042315559517630330078 -0.017259437338276915896 0.012363499442439144366;-0.19362169140059237726 -0.28200372326199923956 -0.18915730262612143187 0.12136987226164624998 -0.094531692599976915869 0.31908332926510452054 0.097080389803857705666 0.16634508188277505325 -0.19055265655088957089 0.069709418010179283187 0.047062420113178370096 0.15891005015927284205 -0.0085689079624141142877 -0.015913878854475829727 -0.17544113703689129258 0.1858775793783770669 -0.055558977897117799161 0.0018938473353665038167 0.070000137571520279489 0.03645236257253812312 0.11268479156392452456 -0.089619683053310847387 0.20203432167724666435 0.11807892632710224878 0.16083236409648282716 -0.072396640536149858836 -0.041738287240096046127 -0.037768645866427766333 -0.045955722574081175891 0.0049511036235335773026 -0.054933019656810300191 0.14819126392370343681 -0.097425535038290975165 -0.15334422637648600918 0.10799172377060593797 0.022344138075297361595 0.049933700426112191673 0.1396858424825663525 -0.024355677179483073425 0.071128237249880391091 -0.12342195848572606875 0.10424603213871583285 0.03911945181048511605 0.14077064184548401804 -0.17599255338489042111 0.086931893435400434123 0.032264360891632287709 0.060146398061651076827 -0.052652525274109504561 0.034279933553288767512;0.073458342245107555168 0.08224187985664101197 0.11543475626801934231 0.14928005794165913334 0.30452621481674724269 -0.089881856640053783836 0.052249014519377509624 -0.0332599859890214955 -0.1814325859045045064 0.2139624234968270089 0.034920162149442608712 0.060931312590487236858 -0.073126955987816835703 0.0061969629826201903799 -0.029315618574407308061 0.056296676396815653609 -0.11200971618483505921 -0.026169007326310726042 0.0051907041583190531575 0.036036153148247825062 0.070161024072725342027 0.052444232869798414198 -0.041780806240708144583 0.025354655195371868237 0.14477884641614610639 -0.13464705403234911163 0.075407842801265972943 0.070597865341571114373 -0.0056186737812795881433 -0.022412539110157017608 -0.056086911430789983257 0.059021433525422273281 0.10765527145036074552 0.0015157848085071449692 -0.071554756475510766789 -0.031381471465423471656 -0.061313539381233288228 0.032461059934308908459 0.040141383430962240819 -0.044154114661722067281 -0.13896107461359077928 -0.023085783559983530377 -0.051935951553160282501 0.078966898578425828714 -0.11246803478478722971 0.088019829964067736183 0.046448714306093333293 0.012880596718451141694 -0.092515993980356189819 0.062576060989617543484;-0.17431815554718368966 -0.17035353464717201133 -0.084482303128741192966 -0.037494582460200140406 0.086496560445237791193 -0.16096647788467927098 -0.014944605959275540641 -0.27145954095341301437 -0.26901674047787571542 0.15046703542018649569 0.10656262758209940344 0.12639320431096368047 -0.0044988204447119553575 0.1423997494750996462 0.055135408148906113468 -2.3870563595402606583e-06 0.069777177363599438009 0.067898697506746957808 0.016983585180687699873 -0.073146703389685249763 -0.0046950972095394912995 -0.075789042402974071688 -0.04485389160577905876 -0.016172981728384539651 -0.0033569334427405988358 -0.051528485678559492189 0.12477337905622377934 0.0093120863438063087442 -0.013161303044549484825 0.033715228018390643039 -0.12130570236122928396 -0.15787302167190203628 -0.23081321112033614806 -0.0074396777105145972531 -0.11444998228598522727 -0.076421151007098078733 -0.091053355779377148638 -0.046207202537352574934 0.017074446804265518834 0.02840534281402026448 0.045701349690254099156 0.14875742531398136737 0.16228423489717319628 0.024095827032208225887 0.010765031334333151 0.072891472615347591146 -0.010699660188475646275 -0.052784514861715800538 -0.0087094955090500913997 0.084080512920322300618;0.24393165692898399755 -0.11726069544134914979 0.13538989897492681447 -0.15547248516953213193 0.18053950191510328982 -0.043011306566432004617 0.092617550193758307886 0.033014158693806833211 0.022835516692218234269 -0.28376726254002132555 -0.14738645265644526039 -0.1596667172004530566 -0.18958355629597309355 0.099670528642918851392 0.14128893775641029884 0.21992871167010791256 -0.051700893985509067952 0.099973809109531880379 0.05668887706195090137 0.044504142729425058556 0.11964828115632375471 0.18818276163652347677 -0.032486006405466373581 0.099340999052714137885 0.20001820019041124943 0.050874425415321430921 0.0053644626807713511468 0.011624756055613933575 -0.016893867024211587508 0.062202475771123977299 0.062805134286991901038 -0.024904845120114659646 0.047550047592844993383 0.051212936238748132944 -0.062328199440518115837 -0.059423654263610035942 0.024868155946886270208 0.05202060265482393725 0.13889951129147329323 0.052918306402876674754 -0.3247983935953724921 -0.033563696892387577531 -0.032044863520896145481 -0.0035787335220532588698 -0.2389125894864107813 -0.098194676154785734412 -0.071986581155300211066 -0.1104028319491764526 -0.12098986341858186666 0.02234679722577397748;-0.21222526584130971261 0.22563490388264048625 0.098589758714976966081 0.018782307090063492944 -0.026806236863427104766 0.27437738387174492871 0.19431247022148354087 0.039874984016326352199 0.16946008801825496182 -0.029908339086145475233 -0.1001267039570952061 -0.17782028192008086931 0.052757949560741035366 0.029174628897064878302 -0.0046776832115822232841 -0.097376313971177658191 -0.12401278765328023479 -0.0051584968984052905275 -0.12228700369442406515 0.083091380393429226103 -0.1892678832295721647 0.15125228591171585579 -0.036239352505335116483 0.041190944528018115511 -0.091367921516641900648 -0.12899558733038249403 -0.061708785080351567787 0.033491648914897823031 0.099697620987141175042 -0.02628791042073688744 -0.059863705560910356052 -0.1855845683549386671 -0.066113635915244953201 -0.14263966053950960511 -0.070939430109667592217 0.16068841121382823611 0.092622823594329661834 -0.21890119331930171787 0.0060998176238943732294 -0.10667590541475982513 0.26725154978409348949 0.074727089440829147504 0.039886496808583825346 0.053764793569280232288 0.26545452316573892038 -0.094328592862469806679 -0.08298608622228492715 0.0056010144564978886147 0.070439796658600423163 0.028282103896951574923];

% Layer 2
b2 = [-0.50841210619740473398;0.13323769246916106201;-0.024228403758878275243;0.10448591045153446388;-0.34711786382876752555;-0.62636570217658449344;-0.086048921741048403633;-0.06935450746265953148;0.07362276925656401072;0.058465718947958308926];
LW2_1 = [-0.27551742314570898396 -0.44802906452875573828 0.77298741904750456477 0.12261028087515243867 0.19337339030039712995 0.22520177369418126201 -0.38137090937802975432 -0.10477237001721019516 0.83147844564733630612 -0.88364490733191547456 -0.39413987183903226308 0.0063280715358729998365 -0.61487418297423324098 0.28934824034867440146 -1.1298822466725968461;0.17506607205833840668 -0.23648763057530033938 -0.6635748720000095302 -0.96756134272133209606 0.18253047697858248988 -0.11697762764292138349 -1.0008609209756262892 -0.12415858043743356609 0.55261638709857785479 0.27495911584829862973 -0.31969499401928919147 1.1425440867462950401 -0.40976920152887735815 -0.42094238130393074604 1.041946779824747038;-0.98883970937034337823 0.5418514441536707027 -0.07803949432395400343 0.96712547017690431161 -0.8123338217138121875 -1.0036601181304565245 0.20259315363772523177 0.11889293666120535897 0.0091060102120994815267 -0.51090151700780106481 -0.24268997620098764489 0.2998557205214765764 -0.82657241230235622975 -0.72650573155732656172 -0.52090707670403813001;0.29234633772315332667 -0.48623580204385785652 -0.091226001243627521942 -0.51816708530554034251 0.91427157750100040978 0.070682531712574714344 0.22023675744658416376 -0.79932314612570742884 -0.75529425032820685093 -0.32483216383241653169 -0.16208388590099243043 0.79308526906849008409 -0.2771359594623359901 0.067468601657695581597 0.26853527037497965102;-0.87189938594973426245 -0.63976624493782374703 -0.77994796254843579142 0.56908368147727050879 -0.22329289096096052725 0.17637580495902943634 1.1779510459325162053 1.025368901167031721 0.075142029593593756553 -0.066005602938548540992 0.044169226358880951666 1.0090645258376578219 -0.17764766685868305096 0.96734988208474659288 0.73744497721939117341;0.091704186369427106995 -0.53927317996607027073 0.26102720860874251141 0.51610047762921507086 0.46918523699034903052 0.19180078035237094203 -0.26859923168200056098 0.8079230667843331215 0.94825560650140450214 -0.70935158988657798229 0.94724859815204609514 -0.50975717901136596844 -0.42586464351824016017 0.51236603489576859616 0.76042266254672730152;0.59751479746821933858 0.82823999980925655517 -0.16492504659735124362 -0.90552840009051482895 -0.61697654378760369287 -0.64087631286005342091 -0.099430395385160505461 -0.08520342743487921422 0.61261668012342818113 -1.4236613649951930238 0.48056851012599771655 0.11512869556456473141 0.15837592094095115369 0.16192680513063179015 0.66972952693908027744;0.29992257878182504438 0.59103475314683018293 0.4003354373414514944 0.0069596538791147277356 -0.34657587499927322572 -0.2202639314582614527 0.81659573571069232756 -1.2206166322122129486 -0.25532525614901885325 0.91629621805738692419 0.39490520241920573641 0.10175286449040793491 -0.70402235202931862101 0.49858800077482051671 -0.47998489760442381025;0.74670942859459510377 0.50596473164405952883 -1.3600591319103612076 -0.0157518605862818524 -0.071264266196045103485 1.1221655204761495916 0.3515499549645023647 -1.0143388475351995393 -0.43238459956300601128 -0.5158761894923304947 -0.39820977684208452851 0.0089662628127197985944 -0.86249339192416751843 0.66681595185591557851 0.92010872535768650771;-0.65114113027208486706 1.0823158443759273162 -0.29960279444382137415 1.0215112275735755976 -0.57632285601824029264 1.0120230297243790751 0.58371024198060150745 -0.87107703606177433464 0.29501534732946355089 -0.43553568306505296981 0.3992105716715477759 0.59655253284815357162 0.49501668035998558359 -0.74156203594592762229 -0.036885495765441735083];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [2.29992670605565;4.24189580751715;14.0962617700931;16.890627686999;8.6226590827848;13.4563254258826;16.6259073960294;13.0441167106891;23.9451315035237;22.8311082154255];
y1_step1.xoffset = [-0.222423275527645;-0.222944634519863;-0.0672185155814461;-0.0580652846496811;-0.20823263216003;-0.0874316681302214;-0.0432645293911705;-0.0645906838443732;-0.020118841714823;-0.0232642175593033];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end
if (nargin < 2), error('Initial input states Xi argument needed.'); end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
elseif ~isempty(Xi)
    Q = size(Xi{1},2);
else
    Q = 0;
end

% Input 1 Delay States
Xd1 = cell(1,6);
for ts=1:5
    temp = removeconstantrows_apply(Xi{1,ts},x1_step1);
    Xd1{ts} = mapminmax_apply(temp,x1_step2);
end

% Input 2 Delay States
Xd2 = cell(1,6);
for ts=1:5
    Xd2{ts} = mapminmax_apply(Xi{2,ts},x2_step1);
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Rotating delay state position
    xdts = mod(ts+4,6)+1;
    
    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xd1{xdts} = mapminmax_apply(temp,x1_step2);
    
    % Input 2
    Xd2{xdts} = mapminmax_apply(X{2,ts},x2_step1);
    
    % Layer 1
    tapdelay1 = cat(1,Xd1{mod(xdts-[1 2 3 4 5]-1,6)+1});
    tapdelay2 = cat(1,Xd2{mod(xdts-[1 2 3 4 5]-1,6)+1});
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*tapdelay1 + IW1_2*tapdelay2);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
finalxts = TS+(1: 5);
xits = finalxts(finalxts<=5);
xts = finalxts(finalxts>5)-5;
Xf = [Xi(:,xits) X(:,xts)];
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
